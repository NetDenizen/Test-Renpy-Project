#TODO: Better transition between layers
#TODO: Resolve weird behavior with buttons being the first thing moused over

define config.layers = ['master', 'buttons', 'buttonmasks', 'body', 'face', 'top', 'nape', 'sides', 'front', 'transient', 'screens', 'overlay']
define audio.scissors_cutting = "sfx_scissors_cutting.wav"
define audio.clippers_shaving = "sfx_clippers_shaving.wav"
define audio.razor_shaving = "sfx_razor_shaving.wav"
define audio.cream_squirting = "sfx_cream_squirt.wav"

image bg_classroom = "buttonmask_mockup_2_bg.png"
image bg_buttons = "buttonmask_mockup_2_buttons.png"
define bg_buttons_scissors_mask = "buttonmask_mockup_2_buttons_scissors_mask.png"
define bg_buttons_clippers_mask = "buttonmask_mockup_2_buttons_clippers_mask.png"
define bg_buttons_razor_mask = "buttonmask_mockup_2_buttons_razor_mask.png"
define bg_buttons_cream_mask = "buttonmask_mockup_2_buttons_cream_mask.png"
define bg_buttons_done_mask = "buttonmask_mockup_2_buttons_done_mask.png"
image bg_buttons_scissors_mask_im = "buttonmask_mockup_2_buttons_scissors_mask.png"
image bg_buttons_clippers_mask_im = "buttonmask_mockup_2_buttons_clippers_mask.png"
image bg_buttons_razor_mask_im = "buttonmask_mockup_2_buttons_razor_mask.png"
image bg_buttons_cream_mask_im = "buttonmask_mockup_2_buttons_cream_mask.png"
image bg_buttons_done_mask_im = "buttonmask_mockup_2_buttons_done_mask.png"
image bg_buttons_scissors = "buttonmask_mockup_2_buttons_scissors.png"
image bg_buttons_clippers = "buttonmask_mockup_2_buttons_clippers.png"
image bg_buttons_razor = "buttonmask_mockup_2_buttons_razor.png"
image bg_buttons_cream = "buttonmask_mockup_2_buttons_cream.png"
image bg_buttons_done = "buttonmask_mockup_2_buttons_done.png"
image bg_buttons_scissors_disabled = "buttonmask_mockup_2_buttons_scissors_disabled.png"
image bg_buttons_clippers_disabled = "buttonmask_mockup_2_buttons_clippers_disabled.png"
image bg_buttons_razor_disabled = "buttonmask_mockup_2_buttons_razor_disabled.png"
image bg_buttons_cream_disabled = "buttonmask_mockup_2_buttons_cream_disabled.png"
image bg_buttons_done_disabled = "buttonmask_mockup_2_buttons_done_disabled.png"

image girl_body = "buttonmask_mockup_2_bodybase.png"
image girl_face_neutral = "buttonmask_mockup_2_bodybase_neutral.png"
image girl_face_nervous = "buttonmask_mockup_2_bodybase_nervous.png"
image girl_face_shocked = "buttonmask_mockup_2_bodybase_shock.png"
image girl_face_wincing = "buttonmask_mockup_2_bodybase_wince.png"
image girl_face_neutral_browless = "buttonmask_mockup_2_bodybase_neutral_browless.png"
image girl_face_nervous_browless = "buttonmask_mockup_2_bodybase_nervous_browless.png"
image girl_face_shocked_browless = "buttonmask_mockup_2_bodybase_shock_browless.png"
image girl_face_wincing_browless = "buttonmask_mockup_2_bodybase_wince_browless.png"
define girl_face_neutral_brows_mask = "buttonmask_mockup_2_bodybase_neutral_brows_mask.png"
define girl_face_nervous_brows_mask = "buttonmask_mockup_2_bodybase_nervous_brows_mask.png"
define girl_face_shocked_brows_mask = "buttonmask_mockup_2_bodybase_shock_brows_mask.png"
define girl_face_wincing_brows_mask = "buttonmask_mockup_2_bodybase_wince_brows_mask.png"

image girl_hair_front_long = "buttonmask_mockup_2_bangs.png"
image girl_hair_front_bob = "buttonmask_mockup_2_bob_bangs.png"
image girl_hair_front_pixie = "buttonmask_mockup_2_pixie_bangs.png"
image girl_hair_front_buzz = "buttonmask_mockup_2_buzz_front.png"
image girl_hair_front_cream = "buttonmask_mockup_2_cream_front.png"
image girl_hair_sides_long = "buttonmask_mockup_2_sides.png"
image girl_hair_sides_bob = "buttonmask_mockup_2_bob_burns.png"
image girl_hair_sides_pixie = "buttonmask_mockup_2_pixie_burns.png"
image girl_hair_nape_long = "buttonmask_mockup_2_nape.png"
image girl_hair_nape_pixie = "buttonmask_mockup_2_pixie_nape.png"
image girl_hair_top_long = "buttonmask_mockup_2_top.png"
image girl_hair_top_bob = "buttonmask_mockup_2_bob_topnape.png"
image girl_hair_top_bob_napeless = "buttonmask_mockup_2_bob_top.png"
image girl_hair_top_pixie = "buttonmask_mockup_2_pixie_top.png"
image girl_hair_top_buzz = "buttonmask_mockup_2_buzz_back.png"
image girl_hair_top_cream = "buttonmask_mockup_2_cream_back.png"

define girl_hair_front_long_mask = "buttonmask_mockup_2_bangs_mask.png"
define girl_hair_front_bob_mask = "buttonmask_mockup_2_bob_bangs_mask.png"
define girl_hair_front_pixie_mask = "buttonmask_mockup_2_pixie_bangs_mask.png"
define girl_hair_front_buzz_mask = "buttonmask_mockup_2_buzz_front_mask.png"
define girl_hair_front_cream_mask = "buttonmask_mockup_2_cream_front_mask.png"
define girl_hair_sides_long_mask = "buttonmask_mockup_2_sides_mask.png"
define girl_hair_sides_bob_mask = "buttonmask_mockup_2_bob_burns_mask.png"
define girl_hair_sides_pixie_mask = "buttonmask_mockup_2_pixie_burns_mask.png"
define girl_hair_nape_long_mask = "buttonmask_mockup_2_nape_mask.png"
define girl_hair_nape_pixie_mask = "buttonmask_mockup_2_pixie_nape_mask.png"
define girl_hair_top_long_mask = "buttonmask_mockup_2_top_mask.png"
define girl_hair_top_bob_mask = "buttonmask_mockup_2_bob_topnape_mask.png"
define girl_hair_top_bob_napeless_mask = "buttonmask_mockup_2_bob_top_mask.png"
define girl_hair_top_pixie_mask = "buttonmask_mockup_2_pixie_top_mask.png"
define girl_hair_top_buzz_mask = "buttonmask_mockup_2_buzz_back_mask.png"
define girl_hair_top_cream_mask = "buttonmask_mockup_2_cream_back_mask.png"

define ButtonActions2 = {
                        Color("#00ff00").rgb : "ButtonMaskTest_2_Scissors",
                        Color("#00ffff").rgb : "ButtonMaskTest_2_Clippers",
                        Color("#00ff80").rgb : "ButtonMaskTest_2_Razor",
                        Color("#ffff80").rgb : "ButtonMaskTest_2_Cream",
                        Color("#80ff00").rgb : "ButtonMaskTest_2_Done",
                        Color("#ff0000").rgb : "ButtonMaskTest_2_Front",
                        Color("#ffff00").rgb : "ButtonMaskTest_2_Sides",
                        Color("#ff8000").rgb : "ButtonMaskTest_2_Nape",
                        Color("#ff00ff").rgb : "ButtonMaskTest_2_Top",
                        Color("#ff0080").rgb : "ButtonMaskTest_2_Brows"
                        }
default ButtonStorage2 = ButtonMaskStorage(ButtonActions2)

# Rough lengths or 'weights' are in mm
# front
# -----
# 203 - buttonmask_mockup_2_bangs.png
# 127 - buttonmask_mockup_2_bob_bangs.png
# 88 - buttonmask_mockup_2_pixie_bangs.png
# 6 - buttonmask_mockup_2_buzz_front.png
#
# sides
# -----
# 406 - buttonmask_mockup_2_sides.png
# 152 - buttonmask_mockup_2_bob_burns.png
# 50 - buttonmask_mockup_2_pixie_burns.png
#
# nape
# ----
# 177 - buttonmask_mockup_2_nape.png
# 76 - buttonmask_mockup_2_pixie_nape.png
#
# top
# ---
# 406 - buttonmask_mockup_2_top.png
# 215 - buttonmask_mockup_2_bob_topnape.png
# 152 - buttonmask_mockup_2_bob_top.png
# 76 - buttonmask_mockup_2_pixie_top.png
# 6 - buttonmask_mockup_2_buzz_back.png

default FrontLength = 203
default SidesLength = 406
default NapeLength = 177
default CrownLength = 406
default FaceExpression = "neutral"
default BrowsLength = 4
default FrontCream = False
default CrownCream = False
default ScissorsUsed = False
default ClippersUsed = False
default RazorUsed = False
default CreamUsed = False
default AtFront = True

screen ButtonMaskTest_2_screen():
    add ButtonMask(ButtonStorage2) at MapMouse

label ButtonMaskTest_2_ShowFace:
    if not AtFront:
        return
    if FaceExpression == "neutral":
        if BrowsLength == 0:
            scene girl_face_neutral_browless onlayer face
            $ ButtonStorage2.SetMask(9, None)
            $ ButtonStorage2.SetHover(Color("#ff0080").rgb, 0, None)
            $ ButtonStorage2.SetSelecteds(Color("#ff0080").rgb, 0, None)
        else:
            scene girl_face_neutral onlayer face
            if CurrentTool != "scissors" and CurrentTool != "cream":
                $ ButtonStorage2.SetMask(9, girl_face_neutral_brows_mask)
                $ ButtonStorage2.SetHover(Color("#ff0080").rgb, 0, girl_face_neutral_brows_mask)
                $ ButtonStorage2.SetSelecteds(Color("#ff0080").rgb, 0, girl_face_neutral_brows_mask)
            else:
                $ ButtonStorage2.SetMask(9, None)
                $ ButtonStorage2.SetHover(Color("#ff0080").rgb, 0, None)
                $ ButtonStorage2.SetSelecteds(Color("#ff0080").rgb, 0, None)
    elif FaceExpression == "nervous":
        if BrowsLength == 0:
            scene girl_face_nervous_browless onlayer face
            $ ButtonStorage2.SetMask(9, None)
            $ ButtonStorage2.SetHover(Color("#ff0080").rgb, 0, None)
            $ ButtonStorage2.SetSelecteds(Color("#ff0080").rgb, 0, None)
        else:
            scene girl_face_nervous onlayer face
            if CurrentTool != "scissors" and CurrentTool != "cream":
                $ ButtonStorage2.SetMask(9, girl_face_nervous_brows_mask)
                $ ButtonStorage2.SetHover(Color("#ff0080").rgb, 0, girl_face_nervous_brows_mask)
                $ ButtonStorage2.SetSelecteds(Color("#ff0080").rgb, 0, girl_face_nervous_brows_mask)
            else:
                $ ButtonStorage2.SetMask(9, None)
                $ ButtonStorage2.SetHover(Color("#ff0080").rgb, 0, None)
                $ ButtonStorage2.SetSelecteds(Color("#ff0080").rgb, 0, None)
    elif FaceExpression == "shocked":
        if BrowsLength == 0:
            scene girl_face_shocked_browless onlayer face
            $ ButtonStorage2.SetMask(9, None)
            $ ButtonStorage2.SetHover(Color("#ff0080").rgb, 0, None)
            $ ButtonStorage2.SetSelecteds(Color("#ff0080").rgb, 0, None)
        else:
            scene girl_face_shocked onlayer face
            $ ButtonStorage2.SetMask(9, girl_face_shocked_brows_mask)
            $ ButtonStorage2.SetHover(Color("#ff0080").rgb, 0, girl_face_shocked_brows_mask)
            $ ButtonStorage2.SetSelecteds(Color("#ff0080").rgb, 0, girl_face_shocked_brows_mask)
            if CurrentTool != "scissors" and CurrentTool != "cream":
                $ ButtonStorage2.SetMask(9, girl_face_shocked_brows_mask)
                $ ButtonStorage2.SetHover(Color("#ff0080").rgb, 0, girl_face_shocked_brows_mask)
                $ ButtonStorage2.SetSelecteds(Color("#ff0080").rgb, 0, girl_face_shocked_brows_mask)
            else:
                $ ButtonStorage2.SetMask(9, None)
                $ ButtonStorage2.SetHover(Color("#ff0080").rgb, 0, None)
                $ ButtonStorage2.SetSelecteds(Color("#ff0080").rgb, 0, None)
    elif FaceExpression == "wincing":
        if BrowsLength == 0:
            scene girl_face_wincing_browless onlayer face
            $ ButtonStorage2.SetMask(9, None)
            $ ButtonStorage2.SetHover(Color("#ff0080").rgb, 0, None)
            $ ButtonStorage2.SetSelecteds(Color("#ff0080").rgb, 0, None)
        else:
            scene girl_face_wincing onlayer face
            if CurrentTool != "scissors" and CurrentTool != "cream":
                $ ButtonStorage2.SetMask(9, girl_face_wincing_brows_mask)
                $ ButtonStorage2.SetHover(Color("#ff0080").rgb, 0, girl_face_wincing_brows_mask)
                $ ButtonStorage2.SetSelecteds(Color("#ff0080").rgb, 0, girl_face_wincing_brows_mask)
            else:
                $ ButtonStorage2.SetMask(9, None)
                $ ButtonStorage2.SetHover(Color("#ff0080").rgb, 0, None)
                $ ButtonStorage2.SetSelecteds(Color("#ff0080").rgb, 0, None)
    return

label ButtonMaskTest_2_ShowScissors:
    if CurrentTool == "scissors":
        hide bg_buttons_scissors_disabled onlayer buttons
        show bg_buttons_scissors onlayer buttons
        scene bg_buttons_scissors_mask_im onlayer buttonmasks at ScissorTrim
        $ ButtonStorage2.SetMask(0, bg_buttons_scissors_mask)
        $ ButtonStorage2.SetHover(Color("#00ff00").rgb, 0, bg_buttons_scissors_mask)
        $ ButtonStorage2.SetSelecteds(Color("#00ff00").rgb, 0, bg_buttons_scissors_mask)
    if FrontLength <= 88 and SidesLength <= 50 and NapeLength <= 76 and CrownLength <= 76:
        hide bg_buttons_scissors onlayer buttons
        show bg_buttons_scissors_disabled onlayer buttons
        hide bg_buttons_scissors_mask_im onlayer buttonmasks
        $ ButtonStorage2.SetMask(0, None)
        $ ButtonStorage2.SetHover(Color("#00ff00").rgb, 0, None)
        $ ButtonStorage2.SetSelecteds(Color("#00ff00").rgb, 0, None)
    else:
        hide bg_buttons_scissors_disabled onlayer buttons
        show bg_buttons_scissors onlayer buttons
        $ ButtonStorage2.SetMask(0, bg_buttons_scissors_mask)
        $ ButtonStorage2.SetHover(Color("#00ff00").rgb, 0, bg_buttons_scissors_mask)
        $ ButtonStorage2.SetSelecteds(Color("#00ff00").rgb, 0, bg_buttons_scissors_mask)
    return

label ButtonMaskTest_2_ShowClippers:
    if CurrentTool == "clippers":
        hide bg_buttons_clippers_disabled onlayer buttons
        show bg_buttons_clippers onlayer buttons
        scene bg_buttons_clippers_mask_im onlayer buttonmasks at ScissorTrim
        $ ButtonStorage2.SetMask(1, bg_buttons_clippers_mask)
        $ ButtonStorage2.SetHover(Color("#00ffff").rgb, 0, bg_buttons_clippers_mask)
        $ ButtonStorage2.SetSelecteds(Color("#00ffff").rgb, 0, bg_buttons_clippers_mask)
    elif BrowsLength == 0 and (FrontCream or FrontLength == 0) and SidesLength <= 6 and NapeLength <= 6 and (CrownCream or CrownLength == 0):
        hide bg_buttons_clippers onlayer buttons
        show bg_buttons_clippers_disabled onlayer buttons
        hide bg_buttons_clippers_mask_im onlayer buttonmasks
        $ ButtonStorage2.SetMask(1, None)
        $ ButtonStorage2.SetHover(Color("#00ffff").rgb, 0, None)
        $ ButtonStorage2.SetSelecteds(Color("#00ffff").rgb, 0, None)
    else:
        hide bg_buttons_clippers_disabled onlayer buttons
        show bg_buttons_clippers onlayer buttons
        $ ButtonStorage2.SetMask(1, bg_buttons_clippers_mask)
        $ ButtonStorage2.SetHover(Color("#00ffff").rgb, 0, bg_buttons_clippers_mask)
        $ ButtonStorage2.SetSelecteds(Color("#00ffff").rgb, 0, bg_buttons_clippers_mask)
    return

label ButtonMaskTest_2_ShowRazor:
    if CurrentTool == "razor":
        hide bg_buttons_razor_disabled onlayer buttons
        show bg_buttons_razor onlayer buttons
        scene bg_buttons_razor_mask_im onlayer buttonmasks at ScissorTrim
        $ ButtonStorage2.SetMask(2, bg_buttons_razor_mask)
        $ ButtonStorage2.SetHover(Color("#00ff80").rgb, 0, bg_buttons_razor_mask)
        $ ButtonStorage2.SetSelecteds(Color("#00ff80").rgb, 0, bg_buttons_razor_mask)
    elif BrowsLength == 0 and FrontLength == 0 and SidesLength <= 6 and NapeLength <= 6 and CrownLength == 0:
        hide bg_buttons_razor onlayer buttons
        show bg_buttons_razor_disabled onlayer buttons
        hide bg_buttons_razor_mask_im onlayer buttonmasks
        $ ButtonStorage2.SetMask(2, None)
        $ ButtonStorage2.SetHover(Color("#00ff80").rgb, 0, None)
        $ ButtonStorage2.SetSelecteds(Color("#00ff80").rgb, 0, None)
    else:
        hide bg_buttons_razor_disabled onlayer buttons
        show bg_buttons_razor onlayer buttons
        $ ButtonStorage2.SetMask(2, bg_buttons_razor_mask)
        $ ButtonStorage2.SetHover(Color("#00ff80").rgb, 0, bg_buttons_razor_mask)
        $ ButtonStorage2.SetSelecteds(Color("#00ff80").rgb, 0, bg_buttons_razor_mask)
    return

label ButtonMaskTest_2_ShowCream:
    if CurrentTool == "cream":
        hide bg_buttons_cream_disabled onlayer buttons
        show bg_buttons_cream onlayer buttons
        scene bg_buttons_cream_mask_im onlayer buttonmasks at ScissorTrim
        $ ButtonStorage2.SetMask(3, bg_buttons_cream_mask)
        $ ButtonStorage2.SetHover(Color("#ffff80").rgb, 0, bg_buttons_cream_mask)
        $ ButtonStorage2.SetSelecteds(Color("#ffff80").rgb, 0, bg_buttons_cream_mask)
    elif (FrontLength > 88 or FrontLength == 0 or FrontCream) and (CrownLength > 76 or CrownLength == 0 or CrownCream):
        hide bg_buttons_cream onlayer buttons
        show bg_buttons_cream_disabled onlayer buttons
        hide bg_buttons_cream_mask_im onlayer buttonmasks
        $ ButtonStorage2.SetMask(3, None)
        $ ButtonStorage2.SetHover(Color("#ffff80").rgb, 0, None)
        $ ButtonStorage2.SetSelecteds(Color("#ffff80").rgb, 0, None)
    else:
        hide bg_buttons_cream_disabled onlayer buttons
        show bg_buttons_cream onlayer buttons
        $ ButtonStorage2.SetMask(3, bg_buttons_cream_mask)
        $ ButtonStorage2.SetHover(Color("#ffff80").rgb, 0, bg_buttons_cream_mask)
        $ ButtonStorage2.SetSelecteds(Color("#ffff80").rgb, 0, bg_buttons_cream_mask)
    return

label ButtonMaskTest_2_ShowFront:
    if AtFront:
        if FrontCream:
            scene girl_hair_front_cream onlayer front
            if CurrentTool == "scissors" or CurrentTool == "clippers" or CurrentTool == "cream":
                $ ButtonStorage2.SetMask(5, None)
                $ ButtonStorage2.SetHover(Color("#ff0000").rgb, 0, None)
                $ ButtonStorage2.SetSelecteds(Color("#ff0000").rgb, 0, None)
            elif CurrentTool == "razor" or CurrentTool == "":
                $ ButtonStorage2.SetMask(5, girl_hair_front_cream_mask)
                $ ButtonStorage2.SetHover(Color("#ff0000").rgb, 0, girl_hair_front_cream_mask)
                $ ButtonStorage2.SetSelecteds(Color("#ff0000").rgb, 0, girl_hair_front_cream_mask)
        elif FrontLength >= 203:
            scene girl_hair_front_long onlayer front
            if CurrentTool == "scissors" or CurrentTool == "clippers" or CurrentTool == "razor" or CurrentTool == "":
                $ ButtonStorage2.SetMask(5, girl_hair_front_long_mask)
                $ ButtonStorage2.SetHover(Color("#ff0000").rgb, 0, girl_hair_front_long_mask)
                $ ButtonStorage2.SetSelecteds(Color("#ff0000").rgb, 0, girl_hair_front_long_mask)
            elif CurrentTool == "cream":
                $ ButtonStorage2.SetMask(5, None)
                $ ButtonStorage2.SetHover(Color("#ff0000").rgb, 0, None)
                $ ButtonStorage2.SetSelecteds(Color("#ff0000").rgb, 0, None)
        elif FrontLength >= 127:
            scene girl_hair_front_bob onlayer front
            if CurrentTool == "scissors" or CurrentTool == "clippers" or CurrentTool == "razor" or CurrentTool == "":
                $ ButtonStorage2.SetMask(5, girl_hair_front_bob_mask)
                $ ButtonStorage2.SetHover(Color("#ff0000").rgb, 0, girl_hair_front_bob_mask)
                $ ButtonStorage2.SetSelecteds(Color("#ff0000").rgb, 0, girl_hair_front_bob_mask)
            elif CurrentTool == "cream":
                $ ButtonStorage2.SetMask(5, None)
                $ ButtonStorage2.SetHover(Color("#ff0000").rgb, 0, None)
                $ ButtonStorage2.SetSelecteds(Color("#ff0000").rgb, 0, None)
        elif FrontLength >= 88:
            scene girl_hair_front_pixie onlayer front
            if CurrentTool == "clippers" or CurrentTool == "razor" or CurrentTool == "cream" or CurrentTool == "":
                $ ButtonStorage2.SetMask(5, girl_hair_front_pixie_mask)
                $ ButtonStorage2.SetHover(Color("#ff0000").rgb, 0,  girl_hair_front_pixie_mask)
                $ ButtonStorage2.SetSelecteds(Color("#ff0000").rgb, 0, girl_hair_front_pixie_mask)
            elif CurrentTool == "scissors":
                $ ButtonStorage2.SetMask(5, None)
                $ ButtonStorage2.SetHover(Color("#ff0000").rgb, 0, None)
                $ ButtonStorage2.SetSelecteds(Color("#ff0000").rgb, 0, None)
        elif FrontLength > 0:
            scene girl_hair_front_buzz onlayer front
            if CurrentTool == "razor" or CurrentTool == "cream" or CurrentTool == "clippers" or CurrentTool == "":
                $ ButtonStorage2.SetMask(5, girl_hair_front_buzz_mask)
                $ ButtonStorage2.SetHover(Color("#ff0000").rgb, 0,  girl_hair_front_buzz_mask)
                $ ButtonStorage2.SetSelecteds(Color("#ff0000").rgb, 0, girl_hair_front_buzz_mask)
            elif CurrentTool == "scissors":
                $ ButtonStorage2.SetMask(5, None)
                $ ButtonStorage2.SetHover(Color("#ff0000").rgb, 0, None)
                $ ButtonStorage2.SetSelecteds(Color("#ff0000").rgb, 0, None)
        else:
            scene onlayer front
            $ ButtonStorage2.SetMask(5, None)
            $ ButtonStorage2.SetHover(Color("#ff0000").rgb, 0, None)
            $ ButtonStorage2.SetSelecteds(Color("#ff0000").rgb, 0, None)
    return

label ButtonMaskTest_2_ShowSides:
    if AtFront:
        if SidesLength >= 406:
            scene girl_hair_sides_long onlayer sides
            if CurrentTool == "cream":
                $ ButtonStorage2.SetMask(6, None)
                $ ButtonStorage2.SetHover(Color("#ffff00").rgb, 0, None)
                $ ButtonStorage2.SetSelecteds(Color("#ffff00").rgb, 0, None)
            elif CurrentTool == "scissors" or CurrentTool == "clippers" or CurrentTool == "razor" or CurrentTool == "":
                $ ButtonStorage2.SetMask(6, girl_hair_sides_long_mask)
                $ ButtonStorage2.SetHover(Color("#ffff00").rgb, 0, girl_hair_sides_long_mask)
                $ ButtonStorage2.SetSelecteds(Color("#ffff00").rgb, 0, girl_hair_sides_long_mask)
        elif SidesLength >= 152:
            scene girl_hair_sides_bob onlayer sides
            if CurrentTool == "cream":
                $ ButtonStorage2.SetMask(6, None)
                $ ButtonStorage2.SetHover(Color("#ffff00").rgb, 0, None)
                $ ButtonStorage2.SetSelecteds(Color("#ffff00").rgb, 0, None)
            elif CurrentTool == "scissors" or CurrentTool == "clippers" or CurrentTool == "razor" or CurrentTool == "":
                $ ButtonStorage2.SetMask(6, girl_hair_sides_bob_mask)
                $ ButtonStorage2.SetHover(Color("#ffff00").rgb, 0, girl_hair_sides_bob_mask)
                $ ButtonStorage2.SetSelecteds(Color("#ffff00").rgb, 0, girl_hair_sides_bob_mask)
        elif SidesLength >= 50:
            scene girl_hair_sides_pixie onlayer sides
            if CurrentTool == "scissors" or CurrentTool == "cream":
                $ ButtonStorage2.SetMask(6, None)
                $ ButtonStorage2.SetHover(Color("#ffff00").rgb, 0, None)
                $ ButtonStorage2.SetSelecteds(Color("#ffff00").rgb, 0, None)
            elif CurrentTool == "clippers" or CurrentTool == "razor" or CurrentTool == "":
                $ ButtonStorage2.SetMask(6, girl_hair_sides_pixie_mask)
                $ ButtonStorage2.SetHover(Color("#ffff00").rgb, 0, girl_hair_sides_pixie_mask)
                $ ButtonStorage2.SetSelecteds(Color("#ffff00").rgb, 0, girl_hair_sides_pixie_mask)
        else:
            scene onlayer sides
            $ ButtonStorage2.SetMask(6, None)
            $ ButtonStorage2.SetHover(Color("#ffff00").rgb, 0, None)
            $ ButtonStorage2.SetSelecteds(Color("#ffff00").rgb, 0, None)
    return

label ButtonMaskTest_2_ShowNape:
    if AtFront:
        if CrownLength < 406 and CrownLength >= 215:
            scene onlayer nape
            $ ButtonStorage2.SetMask(7, None)
            $ ButtonStorage2.SetHover(Color("#ff8000").rgb, 0, None)
            $ ButtonStorage2.SetSelecteds(Color("#ff8000").rgb, 0, None)
        elif NapeLength >= 177:
            scene girl_hair_nape_long onlayer nape
            if CurrentTool == "cream":
                $ ButtonStorage2.SetMask(7, None)
                $ ButtonStorage2.SetHover(Color("#ff8000").rgb, 0, None)
                $ ButtonStorage2.SetSelecteds(Color("#ff8000").rgb, 0, None)
            elif CurrentTool == "scissors" or CurrentTool == "clippers" or CurrentTool == "razor" or CurrentTool == "":
                $ ButtonStorage2.SetMask(7, girl_hair_nape_long_mask)
                $ ButtonStorage2.SetHover(Color("#ff8000").rgb, 0, girl_hair_nape_long_mask)
                $ ButtonStorage2.SetSelecteds(Color("#ff8000").rgb, 0, girl_hair_nape_long_mask)
        elif NapeLength >= 76:
            scene girl_hair_nape_pixie onlayer nape
            if CurrentTool == "scissors" or CurrentTool == "cream":
                $ ButtonStorage2.SetMask(7, None)
                $ ButtonStorage2.SetHover(Color("#ff8000").rgb, 0, None)
                $ ButtonStorage2.SetSelecteds(Color("#ff8000").rgb, 0, None)
            elif CurrentTool == "clippers" or CurrentTool == "razor" or CurrentTool == "":
                $ ButtonStorage2.SetMask(7, girl_hair_nape_pixie_mask)
                $ ButtonStorage2.SetHover(Color("#ff8000").rgb, 0, girl_hair_nape_pixie_mask)
                $ ButtonStorage2.SetSelecteds(Color("#ff8000").rgb, 0, girl_hair_nape_pixie_mask)
        else:
            scene onlayer nape
            $ ButtonStorage2.SetMask(7, None)
            $ ButtonStorage2.SetHover(Color("#ff8000").rgb, 0, None)
            $ ButtonStorage2.SetSelecteds(Color("#ff8000").rgb, 0, None)
    return

label ButtonMaskTest_2_ShowTop:
    if AtFront:
        if CrownCream:
            scene girl_hair_top_cream onlayer top
            if CurrentTool == "scissors" or CurrentTool == "clippers" or CurrentTool == "cream":
                $ ButtonStorage2.SetMask(8, None)
                $ ButtonStorage2.SetHover(Color("#ff00ff").rgb, 0, None)
                $ ButtonStorage2.SetSelecteds(Color("#ff00ff").rgb, 0, None)
            elif CurrentTool == "razor" or CurrentTool == "":
                $ ButtonStorage2.SetMask(8, girl_hair_top_cream_mask)
                $ ButtonStorage2.SetHover(Color("#ff00ff").rgb, 0, girl_hair_top_cream_mask)
                $ ButtonStorage2.SetSelecteds(Color("#ff00ff").rgb, 0, girl_hair_top_cream_mask)
        elif CrownLength >= 406:
            scene girl_hair_top_long onlayer top
            if CurrentTool == "cream":
                $ ButtonStorage2.SetMask(8, None)
                $ ButtonStorage2.SetHover(Color("#ff00ff").rgb, 0, None)
                $ ButtonStorage2.SetSelecteds(Color("#ff00ff").rgb, 0, None)
            elif CurrentTool == "scissors" or CurrentTool == "clippers" or CurrentTool == "razor" or CurrentTool == "":
                $ ButtonStorage2.SetMask(8, girl_hair_top_long_mask)
                $ ButtonStorage2.SetHover(Color("#ff00ff").rgb, 0, girl_hair_top_long_mask)
                $ ButtonStorage2.SetSelecteds(Color("#ff00ff").rgb, 0, girl_hair_top_long_mask)
        elif CrownLength >= 215:
            scene girl_hair_top_bob onlayer top
            if CurrentTool == "cream":
                $ ButtonStorage2.SetMask(8, None)
                $ ButtonStorage2.SetHover(Color("#ff00ff").rgb, 0, None)
                $ ButtonStorage2.SetSelecteds(Color("#ff00ff").rgb, 0, None)
            elif CurrentTool == "scissors" or CurrentTool == "clippers" or CurrentTool == "razor" or CurrentTool == "":
                $ ButtonStorage2.SetMask(8, girl_hair_top_bob_mask)
                $ ButtonStorage2.SetHover(Color("#ff00ff").rgb, 0, girl_hair_top_bob_mask)
                $ ButtonStorage2.SetSelecteds(Color("#ff00ff").rgb, 0, girl_hair_top_bob_mask)
        elif CrownLength >= 152:
            scene girl_hair_top_bob_napeless onlayer top
            if CurrentTool == "cream":
                $ ButtonStorage2.SetMask(8, None)
                $ ButtonStorage2.SetHover(Color("#ff00ff").rgb, 0, None)
                $ ButtonStorage2.SetSelecteds(Color("#ff00ff").rgb, 0, None)
            elif CurrentTool == "scissors" or CurrentTool == "clippers" or CurrentTool == "razor" or CurrentTool == "":
                $ ButtonStorage2.SetMask(8, girl_hair_top_bob_napeless_mask)
                $ ButtonStorage2.SetHover(Color("#ff00ff").rgb, 0, girl_hair_top_bob_napeless_mask)
                $ ButtonStorage2.SetSelecteds(Color("#ff00ff").rgb, 0, girl_hair_top_bob_napeless_mask)
        elif CrownLength >= 76:
            scene girl_hair_top_pixie onlayer top
            if CurrentTool == "scissors":
                $ ButtonStorage2.SetMask(8, None)
                $ ButtonStorage2.SetHover(Color("#ff00ff").rgb, 0, None)
                $ ButtonStorage2.SetSelecteds(Color("#ff00ff").rgb, 0, None)
            elif CurrentTool == "clippers" or CurrentTool == "razor" or CurrentTool == "cream" or CurrentTool == "":
                $ ButtonStorage2.SetMask(8, girl_hair_top_pixie_mask)
                $ ButtonStorage2.SetHover(Color("#ff00ff").rgb, 0, girl_hair_top_pixie_mask)
                $ ButtonStorage2.SetSelecteds(Color("#ff00ff").rgb, 0, girl_hair_top_pixie_mask)
        elif CrownLength > 0:
            scene girl_hair_top_buzz onlayer top
            #if CurrentTool == "clippers" or CurrentTool == "scissors":
            if CurrentTool == "scissors":
                $ ButtonStorage2.SetMask(8, None)
                $ ButtonStorage2.SetHover(Color("#ff00ff").rgb, 0, None)
                $ ButtonStorage2.SetSelecteds(Color("#ff00ff").rgb, 0, None)
            #elif CurrentTool == "cream" or CurrentTool == "razor":
            elif CurrentTool == "clippers" or CurrentTool == "cream" or CurrentTool == "razor" or CurrentTool == "":
                $ ButtonStorage2.SetMask(8, girl_hair_top_buzz_mask)
                $ ButtonStorage2.SetHover(Color("#ff00ff").rgb, 0, girl_hair_top_buzz_mask)
                $ ButtonStorage2.SetSelecteds(Color("#ff00ff").rgb, 0, girl_hair_top_buzz_mask)
        else:
            scene onlayer top
            $ ButtonStorage2.SetMask(8, None)
            $ ButtonStorage2.SetHover(Color("#ff00ff").rgb, 0, None)
            $ ButtonStorage2.SetSelecteds(Color("#ff00ff").rgb, 0, None)
    return

label ButtonMaskTest_2_Update:
    call ButtonMaskTest_2_ShowFace
    call ButtonMaskTest_2_ShowScissors
    call ButtonMaskTest_2_ShowClippers
    call ButtonMaskTest_2_ShowRazor
    call ButtonMaskTest_2_ShowCream
    call ButtonMaskTest_2_ShowFront
    call ButtonMaskTest_2_ShowSides
    call ButtonMaskTest_2_ShowNape
    call ButtonMaskTest_2_ShowTop
    return

label ButtonMaskTest_2:

    python:
        CurrentTool = ""
        # Masks
        ButtonStorage2.AddMask(bg_buttons_scissors_mask)
        ButtonStorage2.AddMask(bg_buttons_clippers_mask)
        ButtonStorage2.AddMask(bg_buttons_razor_mask)
        ButtonStorage2.AddMask(None)
        ButtonStorage2.AddMask(bg_buttons_done_mask)
        ButtonStorage2.AddMask(girl_hair_front_long_mask)
        ButtonStorage2.AddMask(girl_hair_sides_long_mask)
        ButtonStorage2.AddMask(girl_hair_nape_long_mask)
        ButtonStorage2.AddMask(girl_hair_top_long_mask)
        ButtonStorage2.AddMask(girl_face_neutral_brows_mask)
        # Hovers
        ButtonStorage2.AddHover(Color("#00ff00").rgb, bg_buttons_scissors_mask)
        ButtonStorage2.AddHover(Color("#00ffff").rgb, bg_buttons_clippers_mask)
        ButtonStorage2.AddHover(Color("#00ff80").rgb, bg_buttons_razor_mask)
        ButtonStorage2.AddHover(Color("#ffff80").rgb, None)
        ButtonStorage2.AddHover(Color("#80ff00").rgb, bg_buttons_done_mask)
        ButtonStorage2.AddHover(Color("#ff0000").rgb, girl_hair_front_long_mask)
        ButtonStorage2.AddHover(Color("#ffff00").rgb, girl_hair_sides_long_mask)
        ButtonStorage2.AddHover(Color("#ff8000").rgb, girl_hair_nape_long_mask)
        ButtonStorage2.AddHover(Color("#ff00ff").rgb, girl_hair_top_long_mask)
        ButtonStorage2.AddHover(Color("#ff0080").rgb, girl_face_neutral_brows_mask)
        #Selecteds
        ButtonStorage2.AddSelected(Color("#00ff00").rgb, bg_buttons_scissors_mask)
        ButtonStorage2.AddSelected(Color("#00ffff").rgb, bg_buttons_clippers_mask)
        ButtonStorage2.AddSelected(Color("#00ff80").rgb, bg_buttons_razor_mask)
        ButtonStorage2.AddSelected(Color("#ffff80").rgb, None)
        ButtonStorage2.AddSelected(Color("#80ff00").rgb, bg_buttons_done_mask)
        ButtonStorage2.AddSelected(Color("#ff0000").rgb, girl_hair_front_long_mask)
        ButtonStorage2.AddSelected(Color("#ffff00").rgb, girl_hair_sides_long_mask)
        ButtonStorage2.AddSelected(Color("#ff8000").rgb, girl_hair_nape_long_mask)
        ButtonStorage2.AddSelected(Color("#ff00ff").rgb, girl_hair_top_long_mask)
        ButtonStorage2.AddSelected(Color("#ff0080").rgb, girl_face_neutral_brows_mask)

    scene bg_classroom onlayer master
    show bg_buttons_done onlayer master
    show girl_body onlayer body
    call ButtonMaskTest_2_Update
    with FadeWhite

    n "This is the second mockup of the ButtonMask implementation, featuring some new features."

    n "Huge thanks to Malicious' work on the art assets!"

    n "There will be less dialog here, since Emjay has focused more on programming, than writing, however."

    show screen ButtonMaskBlocker
    show screen ButtonMaskTest_2_screen

label ButtonMaskTest_2_start:
    hide screen ButtonMaskBlocker
    g "..."
    jump ButtonMaskTest_2_start

label ButtonMaskTest_2_Front:
    if AtFront:
        if CurrentTool == "scissors" and not FrontCream:
            if FrontLength > 127:
                play audio scissors_cutting
                if not ScissorsUsed and not ClippersUsed and not RazorUsed:
                    $ FaceExpression = "wincing"
                else:
                    $ FaceExpression = "nervous"
                $ FrontLength = 127
                $ ScissorsUsed = True
                call ButtonMaskTest_2_Update
                with dissolve
            elif FrontLength > 88:
                play audio scissors_cutting
                $ FaceExpression = "nervous"
                $ FrontLength = 88
                $ ScissorsUsed = True
                if SidesLength <= 50 and NapeLength <= 76 and (CrownLength <= 76 or CrownCream):
                    $ CurrentTool = ""
                call ButtonMaskTest_2_Update
                with dissolve
        elif CurrentTool == "clippers":
            play audio clippers_shaving
            if not FrontCream and FrontLength > 6:
                if FrontLength > 127 or (not ClippersUsed and not RazorUsed):
                    $ FaceExpression = "wincing"
                elif FrontLength > 88:
                    $ FaceExpression = "shocked"
                elif not ClippersUsed:
                    $ FaceExpression = "wincing"
                $ FrontLength = 6
                $ ClippersUsed = True
                if BrowsLength == 0 and SidesLength <= 6 and NapeLength <= 6 and (CrownCream or CrownLength == 0):
                    $ CurrentTool = ""
                call ButtonMaskTest_2_Update
            with dissolve
        elif CurrentTool == "razor":
            play audio razor_shaving
            if FrontLength > 127 or (not ClippersUsed and not RazorUsed):
                $ FaceExpression = "wincing"
            elif FrontLength > 88:
                $ FaceExpression = "shocked"
            else:
                $ FaceExpression = "nervous"
            $ FrontLength = 0
            $ RazorUsed = True
            $ FrontCream = False
            if BrowsLength == 0 and CrownLength == 0 and SidesLength <= 6 and NapeLength <= 6:
                $ CurrentTool = ""
            call ButtonMaskTest_2_Update
            with dissolve
        elif CurrentTool == "cream" and FrontLength <= 88 and not FrontCream:
            play audio cream_squirting
            if not CreamUsed:
                $ FaceExpression = "nervous"
            else:
                $ FaceExpression = "neutral"
            $ CreamUsed = True
            $ FrontCream = True
            if CrownCream or CrownLength > 76 or CrownLength == 0:
                $ CurrentTool = ""
            call ButtonMaskTest_2_Update
            with dissolve
    #else:
    #	if CurrentTool == "scissors":
    #	elif CurrentTool == "clippers":
    #	elif CurrentTool == "razor":
    jump ButtonMaskTest_2_start

label ButtonMaskTest_2_Sides:
    if AtFront:
        if CurrentTool == "scissors":
            if not ScissorsUsed and not ClippersUsed and not RazorUsed:
                $ FaceExpression = "nervous"
            if SidesLength > 152:
                play audio scissors_cutting
                $ SidesLength = 152
                $ ScissorsUsed = True
                call ButtonMaskTest_2_Update
                with dissolve
            elif SidesLength > 50:
                play audio scissors_cutting
                $ SidesLength = 50
                $ ScissorsUsed = True
                if (FrontLength <= 88 or FrontCream) and NapeLength <= 76 and (CrownLength <= 76 or CrownCream):
                    $ CurrentTool = ""
                call ButtonMaskTest_2_Update
                with dissolve
        elif CurrentTool == "clippers":
            play audio clippers_shaving
            if not ClippersUsed and not RazorUsed:
                $ FaceExpression = "wincing"
            elif SidesLength > 50 or (not ClippersUsed and not RazorUsed):
                $ FaceExpression = "shocked"
            $ SidesLength = 0
            $ ClippersUsed = True
            if BrowsLength == 0 and (FrontCream or FrontLength == 0) and NapeLength <= 6 and (CrownCream or CrownLength == 0):
                $ CurrentTool = ""
            call ButtonMaskTest_2_Update
            with dissolve
        elif CurrentTool == "razor":
            play audio razor_shaving
            if SidesLength > 88:
                $ FaceExpression = "wincing"
            else:
                $ FaceExpression = "nervous"
            $ SidesLength = 0
            $ RazorUsed = True
            if BrowsLength == 0 and FrontLength == 0 and NapeLength <= 6 and CrownLength == 0:
                $ CurrentTool = ""
            call ButtonMaskTest_2_Update
            with dissolve
    #else:
    #	if CurrentTool == "scissors":
    #	elif CurrentTool == "clippers":
    #	elif CurrentTool == "razor":
    jump ButtonMaskTest_2_start

label ButtonMaskTest_2_Nape:
    if AtFront:
        if CurrentTool == "scissors" and NapeLength > 76:
            play audio scissors_cutting
            $ FaceExpression = "nervous"
            $ NapeLength = 76
            $ ScissorsUsed = True
            if (FrontLength <= 88 or FrontCream) and SidesLength <= 50 and (CrownLength <= 76 or CrownCream):
                $ CurrentTool = ""
            call ButtonMaskTest_2_Update
            with dissolve
        elif CurrentTool == "clippers":
            play audio clippers_shaving
            if NapeLength > 76:
                $ FaceExpression = "wincing"
            else:
                $ FaceExpression = "nervous"
            $ NapeLength = 6
            $ ClippersUsed = True
            if BrowsLength == 0 and (FrontCream or FrontLength == 0) and SidesLength <= 6 and (CrownCream or CrownLength == 0):
                $ CurrentTool = ""
            call ButtonMaskTest_2_Update
            with dissolve
        elif CurrentTool == "razor":
            play audio razor_shaving
            if NapeLength > 76:
                $ FaceExpression = "shocked"
            else:
                $ FaceExpression = "wincing"
            $ NapeLength = 0
            $ RazorUsed = True
            if BrowsLength == 0 and FrontLength == 0 and SidesLength <= 6 and CrownLength == 0:
                $ CurrentTool = ""
            call ButtonMaskTest_2_Update
            with dissolve
    #else:
    #	if CurrentTool == "scissors":
    #	elif CurrentTool == "clippers":
    #	elif CurrentTool == "razor":
    jump ButtonMaskTest_2_start

label ButtonMaskTest_2_Top:
    if AtFront:
        if CurrentTool == "scissors" and not CrownCream:
            if CrownLength > 215:
                play audio scissors_cutting
                if not ScissorsUsed and not ClippersUsed and not RazorUsed:
                    $ FaceExpression = "shocked"
                else:
                    $ FaceExpression = "nervous"
                $ CrownLength = 215
                $ ScissorsUsed = True
                call ButtonMaskTest_2_Update
                with dissolve
            elif CrownLength > 152:
                play audio scissors_cutting
                $ FaceExpression = "nervous"
                $ CrownLength = 152
                $ ScissorsUsed = True
                if NapeLength >= 76:
                    $ NapeLength = 76
                call ButtonMaskTest_2_Update
                with dissolve
            elif CrownLength > 76:
                play audio scissors_cutting
                $ CrownLength = 76
                $ ScissorsUsed = True
                if (FrontLength <= 88 or FrontCream) and NapeLength <= 76 and SidesLength <= 50:
                    $ CurrentTool = ""
                call ButtonMaskTest_2_Update
                with dissolve
        elif CurrentTool == "clippers":
            play audio clippers_shaving
            if not CrownCream and CrownLength > 6:
                if CrownLength > 215:
                    $ FaceExpression = "shocked"
                elif CrownLength > 76:
                    $ FaceExpression = "wincing"
                else:
                    $ FaceExpression = "nervous"
                if CrownLength > 152 and CrownLength <= 215 and NapeLength >= 76:
                    $ NapeLength = 76
                $ CrownLength = 6
                $ ClippersUsed = True
                if BrowsLength == 0 and (FrontCream or FrontLength == 0) and SidesLength <= 6 and NapeLength <= 6:
                    $ CurrentTool = ""
                call ButtonMaskTest_2_Update
            with dissolve
        elif CurrentTool == "razor":
            play audio razor_shaving
            if CrownLength > 76:
                $ FaceExpression = "shocked"
            else:
                $ FaceExpression = "nervous"
            if CrownLength > 152 and CrownLength <= 215 and NapeLength >= 76:
                $ NapeLength = 76
            $ CrownLength = 0
            $ RazorUsed = True
            $ CrownCream = False
            if FrontLength == 0 and BrowsLength == 0 and SidesLength <= 6 and NapeLength <= 6:
                $ CurrentTool = ""
            call ButtonMaskTest_2_Update
            with dissolve
        elif CurrentTool == "cream" and CrownLength <= 76 and not CrownCream:
            play audio cream_squirting
            if not CreamUsed:
                $ FaceExpression = "shocked"
            else:
                $ FaceExpression = "nervous"
            $ CreamUsed = True
            $ CrownCream = True
            if FrontCream or FrontLength > 88 or FrontLength == 0:
                $ CurrentTool = ""
            call ButtonMaskTest_2_Update
            with dissolve
    #else:
    #	if CurrentTool == "scissors":
    #	elif CurrentTool == "clippers":
    #	elif CurrentTool == "razor":
    jump ButtonMaskTest_2_start

label ButtonMaskTest_2_Brows:
    show screen ButtonMaskBlocker
    if AtFront and BrowsLength > 0 and (CurrentTool == "clippers" or CurrentTool == "razor"):
        $ FaceExpression = "wincing"
        $ BrowsLength = 0
        if CurrentTool == "clippers":
            play audio clippers_shaving
            $ ClippersUsed = True
            if (FrontCream or FrontLength == 0) and SidesLength <= 6 and NapeLength <= 6 and (CrownCream or CrownLength == 0):
                $ CurrentTool = ""
        else:
            play audio razor_shaving
            $ RazorUsed = True
            if FrontLength == 0 and SidesLength <= 6 and NapeLength <= 6 and CrownLength == 0:
                $ CurrentTool = ""
        call ButtonMaskTest_2_Update
        with dissolve
    jump ButtonMaskTest_2_start

label ButtonMaskTest_2_Scissors:
    show screen ButtonMaskBlocker
    if CurrentTool != "scissors":
        $ CurrentTool = "scissors"
        if AtFront:
            if FrontLength + CrownLength + NapeLength + SidesLength > 1000:
                $ FaceExpression = "nervous"
            else:
                $ FaceExpression = "neutral"
            call ButtonMaskTest_2_Update
            with dissolve
    jump ButtonMaskTest_2_start

label ButtonMaskTest_2_Clippers:
    show screen ButtonMaskBlocker
    if CurrentTool != "clippers":
        $ CurrentTool = "clippers"
        if AtFront:
            if FrontLength + CrownLength + NapeLength + SidesLength > 750:
                $ FaceExpression = "shocked"
            elif FrontLength + CrownLength + NapeLength + SidesLength > 400 and not ClippersUsed:
                $ FaceExpression = "nervous"
            else:
                $ FaceExpression = "neutral"
            call ButtonMaskTest_2_Update
            with dissolve
    jump ButtonMaskTest_2_start

label ButtonMaskTest_2_Razor:
    show screen ButtonMaskBlocker
    if CurrentTool != "razor":
        $ CurrentTool = "razor"
        if AtFront:
            if FrontLength + CrownLength + NapeLength + SidesLength > 500 and not RazorUsed:
                $ FaceExpression = "shocked"
            elif FrontLength + CrownLength + NapeLength + SidesLength > 400 and not ClippersUsed:
                $ FaceExpression = "nervous"
            else:
                $ FaceExpression = "neutral"
            call ButtonMaskTest_2_Update
            with dissolve
    jump ButtonMaskTest_2_start

label ButtonMaskTest_2_Cream:
    show screen ButtonMaskBlocker
    if CurrentTool != "cream" and ( (FrontLength < 127 and FrontLength > 0 and not FrontCream) or (CrownLength < 152 and CrownLength > 0 and not CrownCream) ):
        $ CurrentTool = "cream"
        if AtFront:
            if not CreamUsed:
                $ FaceExpression = "nervous"
            else:
                $ FaceExpression = "neutral"
            call ButtonMaskTest_2_Update
            with dissolve
    jump ButtonMaskTest_2_start

label ButtonMaskTest_2_Done:
    show screen ButtonMaskBlocker

    n "That's the end of the demo!"

    n "As always, hope you enjoyed!"

    hide screen ButtonMaskTest_2_screen
    with dissolve
    hide screen ButtonMaskBlocker

    return
